<!DOCTYPE html>
<html lang="en">
<head>
  <!-- Google Tag Manager -->
  <script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':
    new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],
    j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src=
    'https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);
    })(window,document,'script','dataLayer','GTM-583DHFZ2');</script>
    <!-- End Google Tag Manager -->

    <meta charset="utf-8">
    <!-- 
      TODO

      Upload your Unemployable (or whatever photo you like) to the assets/images folder
      and change the name of the image below to match the uploaded one

      Change the title in the <title> tag to whatever you would like the title of your portfolio to be

      This should be the same across all pages.
      -->
      <link rel="icon" href="../assets/images/bas-tintin-2.png"/>
      <title>Portfolio</title>
    <meta name="description" content="A portfolio template for the Unemployables community.">
    <meta name="viewport" content="width=device-width, initial-scale=1" />

    <link rel="stylesheet" href="../css/layout.css">
    <link rel="stylesheet" href="../css/typography.css">
    <link rel="stylesheet" href="../css/utilities.css">

    <script defer src="../js/script.js"></script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pastis Counter</title>
  <style>
    body {
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      height: 100vh;
      font-family: Arial, sans-serif;
    }
    #count {
      font-size: 48px;
      margin: 20px 0;
    }
    #pastisButton {
      width: 150px;
      cursor: pointer;
    }
    .button-container {
    margin-top: 30px; 
    }
    #footer {
    margin-top: 40px; /* Adds padding above the footer */
    }
  </style>
</head>
<body>
  <!-- Google Tag Manager (noscript) -->
  <noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-583DHFZ2"
    height="0" width="0" style="display:none;visibility:hidden"></iframe></noscript>
    <!-- End Google Tag Manager (noscript) -->

  <!-- NAVBAR -->
  <div class="navbar">
    <a class="nav-title-link" href="../index.html">
      <!-- 
        TODO - Change the "Portfolio Title" to whatever you want displayed in the top left

        (this should be the same across all pages)
       -->
      <span class="nav-title">Bastian Krohg</span>
      <!-- 
        TODO - Change the email after 'mailto:' to your email address for contact 
      
        (this should be the same across all pages)
      -->
      <a class="button" href="mailto:baskrohg@gmail.com">
        <span class="button-text">Contact Me</span>
      </a>
    </a>
  </div>

  <h1>Pastis Counter</h1>
  <div id="count">100</div>
  <!-- Replace with your pastis glass image -->
  <img id="pastisButton" src="../assets/images/pastis.png" alt="Glass of Pastis" />

  <!-- Buttons styled like the contact button -->
  <div class="button-container">
    <a id="decrementButton" class="button" href="#">
      <span class="button-text">Decrement</span>
    </a>
  </div>

  <script>
    // Your JSONBin details
    const BIN_ID = "675b6ea3e41b4d34e4647814"; // Replace with your Bin ID
    const API_KEY = "$2a$10$bxy3kcX5XwOTobCir2VRqOEtgOVasn.VXI1RlQb7QWEaQUbcvoPQS"; // Replace with your API Key
    const BASE_URL = `https://api.jsonbin.io/v3/b/${BIN_ID}`;

    // DOM elements
    const countElement = document.getElementById("count");
    const pastisButton = document.getElementById("pastisButton");

    // Fetch the initial count from JSONBin
    fetch(BASE_URL, {
      headers: {
        "X-Access-Key": API_KEY,
        "Content-Type": "application/json"
      }
    })
      .then(response => response.json())
      .then(data => {
        countElement.textContent = data.record.pastisCount;
      })
      .catch(err => console.error("Error fetching count:", err));

    // Increment count when the image is clicked
    pastisButton.addEventListener("click", () => {
      const currentCount = parseInt(countElement.textContent);
      const newCount = currentCount + 1;

      // Update the count in JSONBin
      fetch(BASE_URL, {
        method: "PUT",
        headers: {
          "X-Access-Key": API_KEY,
          "Content-Type": "application/json"
        },
        body: JSON.stringify({ pastisCount: newCount })
      })
        .then(response => response.json())
        .then(() => {
          countElement.textContent = newCount;
        })
        .catch(err => console.error("Error updating count:", err));
    });
    // Decrement the count when the decrement button is clicked
    decrementButton.addEventListener("click", () => {
      const currentCount = parseInt(countElement.textContent);

      // Ensure the count doesn't go below 0
      if (currentCount > 0) {
        const newCount = currentCount - 1;

        fetch(BASE_URL, {
          method: "PUT",
          headers: {
            "Content-Type": "application/json",
            "X-Access-Key": API_KEY,
          },
          body: JSON.stringify({ pastisCount: newCount }),
        })
          .then(response => response.json())
          .then(() => {
            countElement.textContent = newCount;
          })
          .catch(err => console.error("Error updating count:", err));
      }
    });
  </script>
<!-- FOOTER -->
<div id="footer">
  <!-- 
    TODO - Change href to your Instagram account (can also delete entire "a" element if no Instagram) 

    This should be the same across all pages.
  -->
  <a class="icon-link" target="_blank" href="https://github.com/bastiankrohg">
    <image src="../assets/icons/github-mark.svg" class="footer-icon"/>
  </a>
  <a class="icon-link" target="_blank" href="https://instagram.com/bastiankrohg/">
    <image src="../assets/icons/instagram.svg" class="footer-icon"/>
  </a>
  <!-- 
    TODO - Change href to your Twitter account (can also delete entire "a" element if no Twitter) 
  
    This should be the same across all pages.
  -->
  <a class="icon-link" target="_blank" href="https://twitter.com/KrohgBastian">
    <image src="../assets/icons/X.svg" class="footer-icon"/>
  </a>
  <a class="icon-link" target="_blank" href="https://www.linkedin.com/in/bastiankrohg/">
    <image src="../assets/icons/linkedin.svg" class="footer-icon"/>
  <!-- 
    TODO - Change the email after "mailto" to your contact email 
  
    This should be the same across all pages.
  -->
  <a class="icon-link" href="mailto:baskrohg@gmail.com">
    <image src="../assets/icons/mail.svg" class="footer-icon"/>
  </a>
</div>
</body>
</html>
